# clickhouse

## clickhouse 适用场景

## clickhouse 为什么查询速度快

Clickhouse是一个列式存储的数据库,主要有以下几个方面使其查询速度很快:

- 列式存储。Clickhouse存储的数据是按列存储的,不是按行存储的。这样查询只需要读取相关的列,可以减少IO和解码的数据量。特别是在有大量的列,但查询只需要少数几列的情况下,效果更加明显。
- 压缩编码。Clickhouse对列进行压缩编码,这样可以减小存储空间和读取的数据量。其支持的压缩编码有多种,如ZSTD编码,LZ4压缩等。
- 向量化执行。Clickhouse可以一次性处理一整行数据,不需要一次处理一条记录。这样可以充分利用CPU的SIMD指令,提高运算效率。
- 索引技术。Clickhouse支持多种索引结构,包括Hash索引、布隆过滤器等，这些索引可以提高查询性能和过滤器效率。
- 缓存技术。Clickhouse deploy有层层缓存,从CPU缓存,到系统缓存,以及Clickhouse自带的缓存。这些缓存可以减少去disk读取数据,加速查询。
- 表引擎特性。Clickhouse提供的表引擎有MergeTree,AggregatingMergeTree,SummingMergeTree等,这些表引擎具有一定的预聚合和分区特性,也可以加速查询。
- 分布式架构。ClickHouse是一种分布式数据库，可以在多个节点上运行。每个节点都可以处理数据，并且可以通过网络进行通信。这种架构可以提高查询速度和可扩展性。

综上,Clickhouse通过列式存储、压缩编码、向量化执行、索引技术、缓存技术以及特定的表引擎,实现了减少IO、减少计算量和利用Cache,最终达到提高查询效率的目的。这也是Clickhouse作为一款OLAP数据库可以达到亚秒级查询的关键所在。