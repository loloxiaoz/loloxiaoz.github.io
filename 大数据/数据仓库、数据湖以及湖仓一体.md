# 数据仓库、数据湖以及湖仓一体

| 层级  | 含义         | 英文                  | 数据来源及建模方式                   | 服务领域                       | 数据ETL过程描述                                                           |
| ----- | ------------ | --------------------- | ------------------------------------ | ------------------------------ | ------------------------------------------------------------------------- |
| ST层  | 汇总数据层   | Summary               | 来自DW层，采用维度建模，星型架构     | 报表、主题分析                 | 按年/月/天进行聚合生成业务需要的数据                                      |
| DM层  | 数据集市层   | Data Mart             | 来自DW层、采用维度建模、星型架构     | 数据挖掘、自定义查询、应用集市 | 按业务需求对事实进行拉宽表形成宽表                                        |
| DW层  | 数据事实层   | Data Warehouse        | 来自DWD层、采用维度建模、星型架构    | 为EDW提供各种统计汇总数据      | 从DWD进行轻度清洗、转换汇总，聚合生成DW层数据，按各个维度进行聚合汇总     |
| DWD层 | 数据明细层   | Data Warehouse Detail | 来自ODS层                            | 为EDW提供各种主题业务明细数据  | 根据ODS增量进行数据merge生产全量原始数据                                  |
| ODS层 | 原始数据层   | Origin Data Source    | 来自各业务系统的原始数据, 又叫贴源层 | 为其他逻辑层提供数据           | 通过数据采集将业务数据落地成文本文件，再装载到数据仓库ODS层，不做清洗转换 |
| DIM   | 维表、标签层 | 维Data Source         | 来自各业务系统的原始数据, 又叫贴源层 | 为其他逻辑层提供数据           | 通过数据采集将业务数据落地成文本文件，再装载到数据仓库ODS层，不做清洗转换 |

## 数据仓库VS数据库

| 维度     | 数据库               | 数据仓库               |
| -------- | -------------------- | ---------------------- |
| 特征     | 操作数据             | 信息处理               |
| 面向     | 事务                 | 分析                   |
| 用户     | DBA、开发            | 经理、主管、分析人员   |
| 功能     | 日常操作             | 长期信息需求、决策支持 |
| DB设计   | 基于ER模型、面向应用 | 星型、雪花，面向主题的 |
| 数据     | 当前的、最新的       | 历史的、跨时间维护     |
| 汇总     | 原始的、高度详细     | 汇总的、统一的         |
| 视图     | 详细、一般关系       | 汇总的、统一的         |
| 工作单元 | 短的、简单事务       | 复杂查询               |
| 访问     | 读/写                | 大多数为读             |
| 关注     | 数据进入             | 信息输出               |
| 操作     | 主键索引操作         | 大量磁盘扫描           |
| 用户数   | 数百到数亿           | 数百                   |
| DB规模   | GB到TB               | >=TB                   |
| 优先     | 高性能、高可用       | 高灵活性               |
| 度量     | 事务吞吐量           | 查询吞吐量、响应时间   |

## 实时数仓

基于flink的实时数仓

https://tech.meituan.com/2018/10/18/meishi-data-flink.html

## 数据湖
