# 流式分析引擎

## 需求

- 低延迟进行数据处理
- 支持流Join流、流Join维表
- 支持SQL处理

| 对比项                                       | Flink                                         | Spark Structured Streaming    |
| -------------------------------------------- | --------------------------------------------- | ----------------------------- |
| github star                                  | 16.6k                                         | 30.2k                         |
| 流处理模型                                   | 基于事件驱动的标准实时处理                    | 微批处理                      |
| 编程模型                                     | 链式调用                                      | 链式调用                      |
| 时间概念支持                                 | 事件时间，注入时间，处理时间                  | 事件时间，处理时间            |
| watemark机制                                 | 支持                                          | 支持                          |
| static-steam/stream-static/steam-stream join | 支持，join限制较少                            | 支持，join限制较多            |
| exactly-once支持                             | 支持                                          | 支持                          |
| CDC支持                                      | 支持                                          | 不支持                        |
| 状态管理                                     | 支持                                          | 支持                          |
| 窗口支持                                     | 支持，类型丰富                                | 支持，类型有限                |
| 流批一体编程模型                             | 支持                                          | 支持                          |
| SQL编程模型支持                              | 支持，相对spark较弱，1.3版本相对功能较多      | 支持，仅不支持Top N、Distinct |
| Kafka兼容                                    | kafka的兼容性非常好，支持kafka 0.8、0.9、0.10 | 只支持kafka0.10或更高版本     |
| 容错机制                                     | checkpoint                                    | checkpoint                    |
| 延迟性                                       | 低                                            | 低 100ms                      |
| 国内使用热度                                 | 近几年较流行                                  | 热度较flink偏低               |

选型的主要考虑点：

- CDC
- 状态管理
- 窗口支持
- SQL编程模型支持
- Join支持
- 容错机制
- 延迟性
- 使用热度