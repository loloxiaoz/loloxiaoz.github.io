# Redis特性介绍

## 简介

Redis是一个开源的高性能键值存储系统，可用作数据库、缓存和消息队列等多种用途。由于其高性能、灵活性和可扩展性，Redis被广泛应用于Web应用程序、分布式系统、实时数据处理等领域。

## 特性

支持5种数据结构, 同时支持事务、Lua脚本、持久化等功能。

- string
- hash
- list
- set
- zset

## 适用场景

Redis适用于需要高性能、高可用、高并发的场景，例如：

- 缓存：Redis可以作为缓存来加速Web应用程序的数据读取，减轻数据库的负载。
- 数据库：Redis可以作为一个轻量级的数据库来存储和管理数据，支持多种数据结构和持久化功能。
- 消息队列：Redis可以作为消息队列来处理异步任务和事件，支持发布/订阅、队列等功能。

## 优缺点

### 优点

- 高性能：Redis使用内存存储数据，读写速度非常快，可以达到每秒数百万次操作。
- 多种数据结构：Redis支持多种数据结构，包括字符串、哈希表、列表、集合、有序集合等，非常灵活。
- 数据持久化：Redis支持数据持久化功能，可以将数据保存到磁盘上，即使服务器断电也不会丢失数据。
- 高可用性：Redis支持主从复制和哨兵机制，可以实现高可用性和自动故障转移。

### 缺点

- 内存限制：Redis使用内存存储数据，如果数据量过大，可能会导致内存不足。
- 存储容量受限：由于Redis使用内存存储数据，存储容量受限，不适合存储大量的数据。
- 不支持事务的回滚：Redis虽然支持事务，但是不支持事务的回滚操作。

## 技术原理

Redis的技术原理主要包括以下几个方面：

- 数据结构：Redis支持多种数据结构，包括字符串、哈希表、列表、集合、有序集合等。
- 内存管理：Redis使用内存存储数据，需要进行内存管理，包括内存分配、内存回收、内存压缩等。
- 网络通信：Redis使用TCP协议进行网络通信，支持客户端请求和服务器响应。
- 持久化：Redis支持数据持久化功能，可以将数据保存到磁盘上，包括RDB和AOF两种方式。
- 主从复制：Redis支持主从复制，可以将主节点上的数据同步到从节点上。
- 哨兵机制：Redis支持哨兵机制，可以实现高可用性和自动故障转移。

## 部署模式

### 主从复制

优点：

- master能自动将数据同步到slave，可以进行读写分离，分担master的读压力
- master和slave之间的同步是以非阻塞的方式进行的，同步期间，客户端仍然可以提交查询或更新请求
缺点
- 不具备自动容错与恢复功能，master或slave的宕机都可能导致客户端请求失败
- master宕机，如果宕机前数据没有同步完，则切换IP后存在数据不一致的问题
- 难以支持在线扩容，redis的容量受限于单机配置

### 哨兵模式

优点：

- 哨兵模式基于主从复制模式，所以主从模式有的优点，哨兵模式也有
- 哨兵模式下，master挂掉可以自动进行切换，系统可用性更高
缺点：
- 同样也继承了主从模式难以在线扩容的缺点，Redis的容量受限于单机配置
- 需要额外的资源来启动sentinel进程，实现相对复杂一点，同时slave节点作为备份节点不提供服务

### Cluster模式

- Cluster模式实现了Redis的分布式存储，即每台节点存储不同的内容，来解决在线扩容的问题

## 相同领域其他组件的对比

与Redis类似的其他组件包括Memcached、Couchbase、Riak等，它们都是高性能键值存储系统，具有类似的优缺点和适用场景。与Redis相比，Memcached更加简单、易用，但是不支持数据持久化和高可用性；Couchbase和Riak具有更强的数据存储和查询能力，但是相对复杂，需要更多的配置和管理。因此，在选择键值存储系统时需要根据具体的需求和场景进行选择。

## redis与memcached

- redis部分数据能够存储到硬盘
- 、redis具有更加丰富的数据类型
- 在10w级别数据量上，memcached更加快
- memcached使用预分配的内存池的方法，预先分配内存，可能会造成内存浪费较大。 redis使用线程申请内存的方式，使用free-list的方式来优化内存分配。可能会造成内存随便，会造成一定内存碎片。
- memcached提供cas命令，可以保证并发操作数据的一致性。redis没有提供cas命令，但redis提供了事务的功能，可以保证命令的原子性。中间不会被任何操作终端。
- redis无单点、无瓶颈点、集群级别的高可用