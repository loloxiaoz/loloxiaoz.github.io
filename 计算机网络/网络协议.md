# 网络协议

## 版本历史与发展

- HTTP/1.0：1996 年发布，作为互联网上的第一个 HTTP 协议，支持基本的 Web 请求和响应功能。
- HTTP/1.1：1997 年发布，相较于 HTTP/1.0 增加了许多功能，如持久连接、管道化请求等，逐渐成为互联网的主流协议。
- HTTP/2：2015 年发布，基于 Google 的 SPDY 协议，旨在解决 HTTP/1.1 中的性能问题，如高延迟、多路复用等。
- HTTP/3：2020 年发布，采用 QUIC 作为底层传输协议，以进一步提高 web 性能并解决 HTTP/2 的一些问题。
- QUIC：由 Google 开发，是一种基于 UDP 的传输层协议，旨在降低网络延迟并提高安全性。

## 连接与并发

- HTTP/1.0：不支持持久连接，每个请求需要建立一个新的 TCP 连接，导致较高的延迟。
- HTTP/1.1：支持持久连接，默认情况下每个 TCP 连接可以处理多个请求，但同时只能处理一个请求，导致队头阻塞问题。
- HTTP/2：基于二进制分帧，支持多路复用，允许在一个 TCP 连接上并发处理多个请求和响应，降低了延迟并提高了吞吐量。
- HTTP/3：基于 QUIC，支持连接迁移、快速握手和多路复用，有效解决了 HTTP/1.1 和 HTTP/2 的队头阻塞问题。
- QUIC：支持多路复用和快速握手，可以在一个连接上并发处理多个请求，有效降低延迟。

## 头部压缩

- HTTP/1.0 & HTTP/1.1：不支持头部压缩，头部信息以明文形式传输，可能导致性能损失。
- HTTP/2：引入了 HPACK 头部压缩算法，减少了头部信息的传输大小。
- HTTP/3：采用 QPACK 头部压缩算法，类似于 HTTP/2 的 HPACK，但针对 QUIC 协议进行了优化。

## 安全性

- HTTP/1.0 & HTTP/1.1：不自带加密功能，需要与 SSL/TLS 协议结合使用。
- HTTP/2：推荐使用 SSL/TLS，大多数浏览器仅支持在 HTTPS 上使用 HTTP/2。
- HTTP/3 & QUIC：内建加密功能，提供类似于 TLS 的安全性。

## 传输层协议

- HTTP/1.0 & HTTP/1.1 & HTTP/2：基于 TCP 传输层协议。
- HTTP/3：基于 QUIC 传输层协议。
- QUIC：基于 UDP 传输层协议，提供可靠传输和拥塞控制功能。

## 总结

HTTP/1.0 是最初的 HTTP 协议版本，仅支持基本的功能，性能较差。
HTTP/1.1 在 HTTP/1.0 的基础上增加了许多功能，但仍存在一些性能瓶颈。
HTTP/2 通过多路复用和头部压缩等技术显著提高了性能，成为互联网的主流协议。
HTTP/3 基于 QUIC 协议，进一步提高了 web 性能并解决了 HTTP/2 的一些问题。
QUIC 作为一种基于 UDP 的传输层协议，旨在降低网络延迟并提高安全性，是 HTTP/3 的底层支撑。

| 特性         | HTTP/1.0   | HTTP/1.1           | HTTP/2.0     | HTTP/3.0     | QUIC         |
| ------------ | ---------- | ------------------ | ------------ | ------------ | ------------ |
| 年份         | 1996年     | 1999年             | 2015年       | 2020年       | 2013年       |
| 传输方式     | 串行       | 串行               | 并行         | 并行         | 并行         |
| 请求响应模型 | 同步、阻塞 | 同步、阻塞         | 异步、非阻塞 | 异步、非阻塞 | 异步、非阻塞 |
| 连接复用     | 不支持     | 不支持             | 支持         | 支持         | 支持         |
| 头部压缩     | 不支持     | 支持               | 支持         | 支持         | 支持         |
| 数据压缩     | 不支持     | 无(gzip)           | 支持         | 支持         | 支持         |
| 服务器推送   | 不支持     | 不支持(不完整支持) | 支持         | 支持         | 支持         |
| 流量控制     | 不支持     | 不支持             | 支持         | 支持         | 支持         |
| 二进制格式   | 不支持     | 不支持             | 支持         | 支持         | 支持         |
| 安全性       | 不支持     | 可选               | 可选         | 可选         | 必选         |
| 适用场景     | 简单web    | 复杂web            | 大流量web    | 大流量web    | 移动web      |

- `并行`指多个HTTP请求可以同时在同一个连接上发送和接收。
- `头部压缩`指在发送HTTP请求和响应时压缩头部信息，以减少数据传输量。
- `服务器推送`指服务器在发送响应时主动推送其他资源给客户端，以减少客户端的请求次数和等待时间。
- `流量控制`指在发送HTTP请求和响应时控制数据流量的速度，以避免网络拥塞。
- `二进制格式`指在发送HTTP请求和响应时使用二进制编码，以提高传输效率。
- `安全性`指在发送HTTP请求和响应时使用加密协议，以保证数据的安全性和完整性。
- `适用场景`指不同协议在实际应用中的使用情况。
