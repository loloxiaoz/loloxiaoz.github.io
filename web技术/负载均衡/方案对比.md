# 负载均衡方案对比

## LVS

- 抗负载能力强、是工作在网络4层之上仅作分发之用，没有流量的产生；
- 配置性比较低，这是一个缺点也是一个优点，因为没有可太多配置的东西，所以并不需要太多接触，大大减少了人为出错的几率；
- 工作稳定，自身有完整的双机热备方案；
- 无流量，保证了均衡器IO的性能不会收到大流量的影响；
- 应用范围比较广，可以对所有应用做负载均衡；
- LVS需要向IDC多申请一个IP来做Visual IP，因此需要一定的网络知识，所以对操作人的要求比较高

## HAProxy

- HAProxy是工作在网络7层之上。
- 能够补充Nginx的一些缺点比如Session的保持，Cookie的引导等工作
- 支持url检测后端的服务器出问题的检测会有很好的帮助。
- 更多的负载均衡策略比如：动态加权轮循(Dynamic Round Robin)，加权源地址哈希(Weighted Source Hash)，加权URL哈希和加权参数哈希(Weighted Parameter Hash)已经实现
- 单纯从效率上来讲HAProxy更会比Nginx有更出色的负载均衡速度。
- HAProxy可以对Mysql进行负载均衡，对后端的DB节点进行检测和负载均衡。

## Nginx

- 工作在网络的7层之上，可以针对http应用做一些分流的策略，比如针对域名、目录结构；
- Nginx对网络的依赖比较小；
- Nginx安装和配置比较简单，测试起来比较方便；
- 也可以承担高的负载压力且稳定，一般能支撑超过1万次的并发；
- Nginx可以通过端口检测到服务器内部的故障，比如根据服务器处理网页返回的状态码、超时等等，并且会把返回错误的请求重新提交到另一个节点，不过其中缺点就是不支持url来检测；
- Nginx对请求的异步处理可以帮助节点服务器减轻负载；
- Nginx能支持http和Email，这样就在适用范围上面小很多；
- 不支持Session的保持、对Big request header的支持不是很好，另外默认的只有Round-robin和IP-hash两种负载均衡算法